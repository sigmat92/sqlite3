// SPDX-License-Identifier: (GPL-2.0+ OR MIT)
/*
 * Copyright 2022 NXP
 */

/dts-v1/;

#include <dt-bindings/usb/pd.h>
#include "imx93.dtsi"
#include "imx93-pinfunc.h"  /*added*/
&ele_mu {
	memory-region = <&ele_reserved>;
};

/ {
	model = "Forlinx OK-MX93-C board";
	compatible = "fsl,imx93-11x11-evk", "fsl,imx93";

	chosen {
		stdout-path = &lpuart1;
	};
/*added*/
rotary@0 {
        compatible = "rotary-encoder";
        pinctrl-names = "default";
        pinctrl-0 = <&rotary_encoder_pins>;
        gpios = <&gpio2 22 GPIO_ACTIVE_LOW>,   /* OUTA: P11-15 */
                <&gpio2 18 GPIO_ACTIVE_LOW>;   /* OUTB: P11-12 */
        linux,axis = <0>;
        rotary-encoder,relative-axis;
        rotary-encoder,rollover;
        rotary-encoder,steps-per-period = <2>;
        debounce-interval = <2>;
        wakeup-source;
    };

    rotary_sw: rotary-sw {
        compatible = "gpio-keys";
        pinctrl-names = "default";
        pinctrl-0 = <&rotary_sw_pins>;
        status = "okay";
 
        button {
            label = "Rotary Switch";
            gpios = <&gpio2 17 GPIO_ACTIVE_LOW>;  /* SW: P11-11 */
            linux,code = <28>; /* KEY_ENTER */
            debounce-interval = <10>;
        };
    };
/*added*/

	forlinx_control {
		//forlinx control display panel
		//"rgb1024x600" : rgb interface output 1024*600 image
		//"rgb800x480_capacitive" : rgb interface output 800x480 imag with capacitive touchpad
		//"rgb800x480_resistive" : rgb interface output 800x480 imag with resistive touchpad
		//"lvds" : lvds interface
		//"mipidsi" : mipidsi interface
		//"disabled" :  display interface, both rgb, lvds, mipidsi disabled
		//others keys are considered as interface disabled

		status = "disabled";
		video-vp0 = "rgb1024x600";   //rgb1024x600 rgb800x480_capacitive rgb800x480_resistive lvds mipidsi disabled
	};
	reserved-memory {
		#address-cells = <2>;
		#size-cells = <2>;
		ranges;

		linux,cma {
			compatible = "shared-dma-pool";
			reusable;
			alloc-ranges = <0 0x80000000 0 0x25000000>;
			size = <0 0x10000000>;
			linux,cma-default;
		};

		ethosu_mem: ethosu_region@a5000000 {
			compatible = "shared-dma-pool";
			reusable;
			reg = <0x0 0xa5000000 0x0 0x10000000>;
		};

		vdev0vring0: vdev0vring0@a4000000 {
			reg = <0 0xa4000000 0 0x8000>;
			no-map;
		};

		vdev0vring1: vdev0vring1@a4008000 {
			reg = <0 0xa4008000 0 0x8000>;
			no-map;
		};

		vdev1vring0: vdev1vring0@a4000000 {
			reg = <0 0xa4010000 0 0x8000>;
			no-map;
		};

		vdev1vring1: vdev1vring1@a4018000 {
			reg = <0 0xa4018000 0 0x8000>;
			no-map;
		};

		rsc_table: rsc-table@2021e000 {
			reg = <0 0x2021e000 0 0x1000>;
			no-map;
		};

		vdevbuffer: vdevbuffer@a4020000 {
			compatible = "shared-dma-pool";
			reg = <0 0xa4020000 0 0x100000>;
			no-map;
		};

		ele_reserved: ele-reserved@a4120000 {
			compatible = "shared-dma-pool";
			reg = <0 0xa4120000 0 0x100000>;
			no-map;
		};
	};

	leds {
		compatible = "gpio-leds";
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_gpio_led>;

		led-0 {
			label = "heartbeat";
			linux,default-trigger = "heartbeat";
			gpios = <&gpio4 29 GPIO_ACTIVE_HIGH>;
			default-state = "off";
		};

		led-1 {
			label = "led1";
			linux,default-trigger = "timer";
			/*gpios = <&gpio3 26 GPIO_ACTIVE_HIGH>;*/
			gpios = <&gpio4 28 GPIO_ACTIVE_HIGH>;
			default-state = "on";
		};
	};

	keys {
		compatible = "gpio-keys";
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_gpio_key>;
		
		key1 {
			label = "key1";
			linux,code = <103>;
			debounce-interval = <20>;
			gpios = <&gpio3 27 GPIO_ACTIVE_LOW>;
		};
	};

	cm33: imx93-cm33 {
		compatible = "fsl,imx93-cm33";
		mbox-names = "tx", "rx", "rxdb";
		mboxes = <&mu1 0 1
			  &mu1 1 1
			  &mu1 3 1>;
		memory-region = <&vdevbuffer>, <&vdev0vring0>, <&vdev0vring1>,
				<&vdev1vring0>, <&vdev1vring1>, <&rsc_table>;
		fsl,startup-delay-ms = <500>;
	};

	ethosu {
		compatible = "arm,ethosu";
		fsl,cm33-proc = <&cm33>;
		memory-region = <&ethosu_mem>;
		power-domains = <&mlmix>;
	};

	reg_usdhc2_vmmc: regulator-usdhc2 {
		compatible = "regulator-fixed";
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_reg_usdhc2_vmmc>;
		regulator-name = "VSD_3V3";
		regulator-min-microvolt = <3300000>;
		regulator-max-microvolt = <3300000>;
		gpio = <&gpio3 7 GPIO_ACTIVE_HIGH>;
		off-on-delay-us = <12000>;
		enable-active-high;
	};

	reg_vref_1v8: regulator-adc-vref {
		compatible = "regulator-fixed";
		regulator-name = "vref_1v8";
		regulator-min-microvolt = <1800000>;
		regulator-max-microvolt = <1800000>;
	};

	wifi_en: wifi-en {
		compatible = "regulator-fixed";
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_wifi_en>;
		regulator-name = "WIFI_EN_3V3";
		regulator-min-microvolt = <3300000>;
		regulator-max-microvolt = <3300000>;
		gpio = <&gpio1 10 GPIO_ACTIVE_HIGH>;
		enable-active-high;
	};

	board_gpio: board-gpio {
		compatible = "regulator-fixed";
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_gpio>;
		regulator-name = "BOARD_GPIO_CONFIG";
		status = "disabled";
	};
	sound-nau88c22 {
		status = "okay";
		compatible = "fsl,imx-audio-nau88c22";
		model = "nau88c22-audio";
		audio-cpu = <&sai1>;
		audio-codec = <&nau88c22_codec>;
		audio-routing =
			"Headphone Jack", "RHP",
			"Headphone Jack", "LHP",
			"Ext Spk", "LSPK",
			"Ext Spk", "RSPK",
			"RMICP", "AMIC",
			"RMICN", "AMIC",
			"RMICP", "AMIC",
			"RMICN", "AMIC",
			"LMICP", "AMIC",
			"LMICN", "AMIC",
			"LMICP", "AMIC",
			"LMICN", "AMIC";
	};

	clk_audio: clock-audio {
		compatible = "fixed-clock";
		#clock-cells = <0>;
		clock-frequency = <24000000>;
		clock-output-names = "clk_audio";
	};

	display_backlight: display_backlight {
		compatible = "pwm-backlight";
		/*pwms = <&flexio2_pwm 0 50000 0>;*/
		pwms = <&flexio1_pwm 0 50000 0>;
		status = "okay";

		brightness-levels = < 
			0   1   2   3   4   5   6   7
			8   9  10  11  12  13  14  15
			16  17  18  19  20  21  22  23
			24  25  26  27  28  29  30  31
			32  33  34  35  36  37  38  39
			40  41  42  43  44  45  46  47
			48  49  50  51  52  53  54  55
			56  57  58  59  60  61  62  63
			64  65  66  67  68  69  70  71
			72  73  74  75  76  77  78  79
			80  81  82  83  84  85  86  87
			88  89  90  91  92  93  94  95
			96  97  98  99 100 101 102 103
			104 105 106 107 108 109 110 111
			112 113 114 115 116 117 118 119
			120 121 122 123 124 125 126 127
			128 129 130 131 132 133 134 135
			136 137 138 139 140 141 142 143
			144 145 146 147 148 149 150 151
			152 153 154 155 156 157 158 159
			160 161 162 163 164 165 166 167
			168 169 170 171 172 173 174 175
			176 177 178 179 180 181 182 183
			184 185 186 187 188 189 190 191
			192 193 194 195 196 197 198 199
			200 201 202 203 204 205 206 207
			208 209 210 211 212 213 214 215
			216 217 218 219 220 221 222 223
			224 225 226 227 228 229 230 231
			232 233 234 235 236 237 238 239
			240 241 242 243 244 245 246 247
			248 249 250 251 252 253 254 255
		>;
		default-brightness-level = <255>;
	};
};

&sai1 {
	#sound-dai-cells = <0>;
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_sai1>;
	assigned-clocks = <&clk IMX93_CLK_SAI1>;
	assigned-clock-parents = <&clk IMX93_CLK_AUDIO_PLL>;
	assigned-clock-rates = <12288000>;
	status = "okay";
};

	
&adc1 {
	vref-supply = <&reg_vref_1v8>;
	status = "okay";
};





&eqos {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_eqos>, <&pinctrl_eth_reset>;
	phy-reset-gpios = <&gpio3 20 GPIO_ACTIVE_LOW>;
	phy-reset-duration = <200>;
	phy-mode = "rgmii-id";
	phy-handle = <&ethphy1>;
	status = "okay";

	mdio {
		compatible = "snps,dwmac-mdio";
		#address-cells = <1>;
		#size-cells = <0>;
		clock-frequency = <5000000>;

		ethphy1: ethernet-phy@1 {
			compatible = "ethernet-phy-ieee802.3-c22";
			reg = <1>;
			eee-broken-1000t;
			rtl821x,aldps-disable;
			rtl821x,clkout-disable;
		};
	};
};

&fec {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_fec>;
	phy-mode = "rgmii-id";
	phy-handle = <&ethphy2>;
	fsl,magic-packet;
	status = "okay";

	mdio {
		#address-cells = <1>;
		#size-cells = <0>;
		clock-frequency = <5000000>;

		ethphy2: ethernet-phy@1 {
			compatible = "ethernet-phy-ieee802.3-c22";
			reg = <1>;
			eee-broken-1000t;
			rtl821x,aldps-disable;
			rtl821x,clkout-disable;
		};
	};
};

&flexcan1 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_flexcan1>;
/*	xceiver-supply = <&reg_can2_stby>;*/
	status = "okay";
};

&flexcan2 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_flexcan2>;
/*	xceiver-supply = <&reg_can2_stby>;*/
	status = "okay";
};

&dphy {
	status = "okay";
};

/ {
	parallel_disp0: disp0 {
		compatible = "fsl,imx-parallel-display";
		edid = <0>;
		interface-pix-fmt = "rgb888";
		#size-cells = <0>;
		#address-cells = <1>;
		status = "okay";

		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_lcdif0>;

		port@0 {
			reg = <0>;

			display_in: endpoint {
				remote-endpoint = <&lcdif_to_dpi>;
			};
		};

		port@1 {
			reg = <1>;

			display_out: endpoint {
				remote-endpoint = <&panel_dpi1>;
			};
		};
	};

	panel-rgb1024x600 {
		bus-fmt = "rgb888";
		bits-per-color = <8>;
		panel-height-mm = <121>;
		panel-width-mm = <68>;
		status = "okay";
		backlight = <&display_backlight>;
		compatible = "panel-dpi";

		panel-timing {
			pixelclk-active = <0>;
			de-active = <1>;
			vsync-active = <0>;
			hsync-active = <0>;
			vsync-len = <2>;
			hsync-len = <20>;
			vfront-porch = <10>;
			vback-porch = <23>;
			hfront-porch = <140>;
			hback-porch = <160>;
			vactive = <600>;
			hactive = <1024>;
			clock-frequency = <51000000>;
		};

		ports {
			#size-cells = <1>;
			#address-cells = <1>;
			port@0 {
				panel_dpi0: endpoint {
					remote-endpoint = <&display_out>;
				};
			};
		};
	};

	panel-rgb800x480 {
		compatible = "panel-dpi";
		bus-fmt = "rgb888";
		bits-per-color = <8>;
		height-mm = <121>;
		width-mm = <68>;
		status = "okay";
		backlight = <&display_backlight>;

		rotation = <0>;

		panel-timing {
			pixelclk-active = <0>;
			de-active = <1>;
			vsync-active = <0>;
			hsync-active = <0>;
			vsync-len = <3>;
			hsync-len = <26>;
			vfront-porch = <22>;
			vback-porch = <20>;
			hfront-porch = <210>;
			hback-porch = <20>;
			vactive = <480>;
			hactive = <800>;
			clock-frequency = <30000000>;
		};

		ports {
			#size-cells = <1>;
			#address-cells = <1>;
			port@0 {
				panel_dpi1: endpoint {
					remote-endpoint = <&display_out>;
				};
			};
		};
	};
/*original 
	lvds0_panel {
		//compatible = "forlinx,panel", "panel-lvds";
		compatible = "boe,ev121wxm-n10-1850";
		backlight = <&display_backlight>;
		panel-type = "lvds";

		width-mm = <218>;
		height-mm = <138>;
		data-mapping = "vesa-24";
		status = "okay";

		panel-timing {
			hback-porch     = <10>;
			hfront-porch    = <140>;
			hactive         = <1280>;
			hsync-len       = <10>;
			vback-porch     = <1>;
			vfront-porch    = <2>;
			vactive         = <800>;
			vsync-len       = <20>;
			clock-frequency = <72000000>;
		};
*/
//updates for innolux,g150xge-l04 
	lvds0_panel {
		//compatible = "forlinx,panel", "panel-lvds";
		//compatible = "boe,ev121wxm-n10-1850";
		compatible = "innolux,g150xge-l04", "panel-lvds";
		backlight = <&display_backlight>;
		panel-type = "lvds";

		//width-mm = <218>;
		//height-mm = <138>;
		width-mm = <304>;
    		height-mm = <228>;

		//data-mapping = "vesa-24";
		data-mapping = "jeida-24";
		status = "okay";

		panel-timing {
			//hback-porch     = <10>;
			hback-porch = <160>;
			//hfront-porch    = <140>;
			hfront-porch = <24>;
			//hactive         = <1280>;
			hactive = <1024>;
			//hsync-len       = <10>;
			hsync-len = <136>;
			//vback-porch     = <1>;
			vback-porch = <29>;
			//vfront-porch    = <2>;
			//hfront-porch = <24>;
			vfront-porch = <3>;
			//vactive         = <800>;
			vactive = <768>;
			//vsync-len       = <20>;
			vsync-len = <6>;
			//clock-frequency = <72000000>;
			clock-frequency = <65000000>;
			//extra
			hsync-active = <0>;
        		vsync-active = <0>;
        		de-active = <1>;
        		pixelclk-active = <0>;

		};

		ports {
			#address-cells = <1>;
			#size-cells = <0>;

			port@0 {
				reg = <0>;
				panel_lvds_in: endpoint {
					remote-endpoint = <&lvds_out>;
				};
			};
		};
	};
};

&lcdif_to_dpi {
	remote-endpoint = <&display_in>;
};


&ldb {
/*	status = "okay";*/

	lvds-channel@0 {
		/*fsl,data-mapping = "spwg";
		/fsl,data-width = <24>;*/
		status = "okay";
		port@1 {
			reg = <1>;

			lvds_out: endpoint {
				remote-endpoint = <&panel_lvds_in>;
			};
		};
	};
};

&ldb_phy {
	status = "okay";
};

&dsi {
/*	status = "okay";*/

	#address-cells = <1>;
	#size-cells = <0>;

	ports {
		port@1 {
			reg = <1>;

			dsi_to_mipi_panel: endpoint {
				remote-endpoint = <&mipi_panel_from_dsi>;
			};
		};
	};

	mipi_panel {
		compatible = "forlinx,mipi-dsi";
		reg = <0>;
		dsi-lanes = <4>;
		video-mode = <2>;	/* 0: burst mode
					 * 1: non-burst mode with sync event
					 * 2: non-burst mode with sync pulse
					 */
		panel-width-mm = <68>;
		panel-height-mm = <121>;
		backlight = <&display_backlight>;
		status = "okay";
		display-timings {
			panel7_1024x600_kernel: timings {
				hback-porch     = <160>;
				hfront-porch    = <160>;
				hactive                 = <1024>;
				hsync-len               = <70>;
				vback-porch     = <23>;
				vfront-porch    = <12>;
				vactive         = <600>;
				vsync-len       = <10>;
				clock-frequency = <45000000>;
				vsync-active    = <0>;
				hsync-active    = <0>;
				de-active       = <0>;
				pixelclk-active = <0>;
			};
		};

		ports {
			#address-cells = <1>;
			#size-cells = <0>;
			port@0 {
				reg = <0>;
				mipi_panel_from_dsi: endpoint {
					remote-endpoint = <&dsi_to_mipi_panel>;
				};
			};
		};
	};
};

&lcdif {
	status = "okay";
	/*assigned-clock-rates = <445333333>, <148444444>, <400000000>, <133333333>;*/
	assigned-clock-rates = <498000000>, <71142857>, <400000000>, <133333333>;
};

&lpm {
	soc-supply = <&buck1>;
	status = "okay";
};

/*
 * When add, delete or change any target device setting in &lpi2c1,
 * please synchronize the changes to the &i3c1 bus in imx93-11x11-evk-i3c.dts.
 */
&lpi2c1 {
	#address-cells = <1>;
	#size-cells = <0>;
	clock-frequency = <400000>;
	pinctrl-names = "default", "sleep";
	pinctrl-0 = <&pinctrl_lpi2c1>;
	pinctrl-1 = <&pinctrl_lpi2c1>;
	status = "okay";

	touch_gt911_mipi: touch_gt911_mipi@14 {
		compatible = "goodix,gt911";
		reg = <0x14>;
		status = "okay";
		edge-failling-trigger;
		interrupt-parent = <&gpio3>;
		interrupts = <23 IRQ_TYPE_EDGE_FALLING>;
		irq-gpios = <&gpio3 23 GPIO_ACTIVE_HIGH>;
		reset-gpios = <&gpio3 22 GPIO_ACTIVE_HIGH>;
		touchscreen-size-x = <1024>;
		touchscreen-size-y = <600>;
	};
	touch_ft5306: touch_ft5306@38 {
                compatible = "edt,edt-ft5306", "edt,edt-ft5x06";
                reg = <0x38>;
                edge-failling-trigger;
                interrupt-parent = <&gpio3>;
                interrupts = <23 IRQ_TYPE_EDGE_FALLING>;
                touchscreen-size-x = <1024>;
                touchscreen-size-y = <600>;
                status = "okay";
        };
	nau88c22_codec: nau8822@1a {
		status = "okay";
		#sound-dai-cells = <0>;
		compatible = "nuvoton,nau8822";
		reg = <0x1a>;
		clocks = <&clk_audio>;
		clock-names = "mclk";
	};

	lsm6dsm@6a {
		compatible = "st,lsm6dso";
		reg = <0x6a>;
	};
};

&lpi2c2 {
	#address-cells = <1>;
	#size-cells = <0>;
	clock-frequency = <400000>;
	pinctrl-names = "default", "sleep";
	pinctrl-0 = <&pinctrl_lpi2c2>;
	pinctrl-1 = <&pinctrl_lpi2c2>;
	status = "okay";

	pmic@25 {
		compatible = "nxp,pca9451a";
		reg = <0x25>;
/*		interrupt-parent = <&pcal6524>;
		interrupts = <11 IRQ_TYPE_EDGE_FALLING>;*/

		regulators {
			buck1: BUCK1 {
				regulator-name = "BUCK1";
				regulator-min-microvolt = <650000>;
				regulator-max-microvolt = <2237500>;
				regulator-boot-on;
				regulator-always-on;
				regulator-ramp-delay = <3125>;
			};

			buck2: BUCK2 {
				regulator-name = "BUCK2";
				regulator-min-microvolt = <600000>;
				regulator-max-microvolt = <2187500>;
				regulator-boot-on;
				regulator-always-on;
				regulator-ramp-delay = <3125>;
			};

			buck4: BUCK4{
				regulator-name = "BUCK4";
				regulator-min-microvolt = <600000>;
				regulator-max-microvolt = <3400000>;
				regulator-boot-on;
				regulator-always-on;
			};

			buck5: BUCK5{
				regulator-name = "BUCK5";
				regulator-min-microvolt = <600000>;
				regulator-max-microvolt = <3400000>;
				regulator-boot-on;
				regulator-always-on;
			};

			buck6: BUCK6 {
				regulator-name = "BUCK6";
				regulator-min-microvolt = <600000>;
				regulator-max-microvolt = <3400000>;
				regulator-boot-on;
				regulator-always-on;
			};

			ldo1: LDO1 {
				regulator-name = "LDO1";
				regulator-min-microvolt = <1600000>;
				regulator-max-microvolt = <3300000>;
				regulator-boot-on;
				regulator-always-on;
			};

			ldo2: LDO2 {
				regulator-name = "LDO2";
				regulator-min-microvolt = <800000>;
				regulator-max-microvolt = <1150000>;
				regulator-boot-on;
				regulator-always-on;
			};

			ldo3: LDO3 {
				regulator-name = "LDO3";
				regulator-min-microvolt = <800000>;
				regulator-max-microvolt = <3300000>;
				regulator-boot-on;
				regulator-always-on;
			};

			ldo4: LDO4 {
				regulator-name = "LDO4";
				regulator-min-microvolt = <800000>;
				regulator-max-microvolt = <3300000>;
				regulator-boot-on;
				regulator-always-on;
			};

			ldo5: LDO5 {
				regulator-name = "LDO5";
				regulator-min-microvolt = <1800000>;
				regulator-max-microvolt = <3300000>;
				regulator-boot-on;
				regulator-always-on;
			};
		};
	};

        touch_tsc2007: touch_tsc2007@48 {
                compatible = "ti,tsc2007";
                reg = <0x48>;
                interrupt-parent = <&gpio3>;
                interrupts = <23 IRQ_TYPE_EDGE_FALLING>;
                gpios = <&gpio3 23 GPIO_ACTIVE_HIGH>;
                ti,x-plate-ohms = <180>;
		ti,fuzzx = <800>;
		ti,fuzzy = <480>;
                status = "okay";
        };


	touch_gt911: touch_gt911@14 {
		compatible = "goodix,gt911";
		reg = <0x14>;
		status = "okay";
		edge-failling-trigger;
		interrupt-parent = <&gpio3>;
		interrupts = <23 IRQ_TYPE_EDGE_FALLING>;
		irq-gpios = <&gpio3 23 GPIO_ACTIVE_HIGH>;
		reset-gpios = <&gpio3 22 GPIO_ACTIVE_HIGH>;
		touchscreen-size-x = <800>;
		touchscreen-size-y = <480>;
		touchscreen-inverted-x;
		touchscreen-inverted-y;
	};
};

&lpi2c3 {
	#address-cells = <1>;
	#size-cells = <0>;
	clock-frequency = <400000>;
	pinctrl-names = "default", "sleep";
	pinctrl-0 = <&pinctrl_lpi2c3>;
	pinctrl-1 = <&pinctrl_lpi2c3>;
	status = "okay";

	pcf8563:rtc@51 {
                compatible = "nxp,pcf8563";
                reg = <0x51>;
                status = "okay";
        };

        rx8010:rtc@32 {
                compatible = "epson,rx8010";
                reg = <0x32>;
                status = "okay";
        };
	ov5645_0: ov5645_mipi@3c {
		compatible = "ovti,ov5645";
		reg = <0x3c>;
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_csi0_gpio>;
		clocks = <&clk IMX93_CLK_CCM_CKO3>;
		clock-names = "xclk";
		assigned-clocks = <&clk IMX93_CLK_CCM_CKO3>;
		assigned-clock-parents = <&clk IMX93_CLK_24M>;
		assigned-clock-rates = <24000000>;
		csi_id = <0>;
		enable-gpios = <&gpio3 24 GPIO_ACTIVE_HIGH>;
		reset-gpios = <&gpio3 25 GPIO_ACTIVE_LOW>;
		clock-frequency = <24000000>;
		mclk = <24000000>;
		mclk_source = <0>;
		mipi_csi;
		status = "okay";

		port {
			ov5645_mipi_1_ep: endpoint {
				remote-endpoint = <&mipi_csi_ep>;
				data-lanes = <1 2>;
				clock-lanes = <0>;
				link-frequencies = /bits/ 64 <336000000>;
			};
		};
	};
	touch_gt928: touch_gt928@14 {
		compatible = "goodix,gt928";
		reg = <0x14>;
		status = "okay";
		edge-failling-trigger;
		interrupt-parent = <&gpio3>;
		interrupts = <23 IRQ_TYPE_EDGE_FALLING>;
		irq-gpios = <&gpio3 23 GPIO_ACTIVE_HIGH>;
		reset-gpios = <&gpio3 22 GPIO_ACTIVE_HIGH>;
		touchscreen-size-x = <1280>;
		touchscreen-size-y = <800>;
		touchscreen-swapped-x-y;
	};
};

&lpuart1 { /* console */
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_uart1>;
	status = "okay";
};


&media_blk_ctrl {
	status = "okay";
};

&mu1 {
	status = "okay";
};

&mu2 {
	status = "okay";
};

&usbotg1 {
	dr_mode = "otg";
/*	hnp-disable;
	srp-disable;*/
	adp-disable;
/*	usb-role-switch;*/
	disable-over-current;
	samsung,picophy-pre-emp-curr-control = <3>;
	samsung,picophy-dc-vol-level-adjust = <7>;
	status = "okay";
/*
	port {
		usb1_drd_sw: endpoint {
			remote-endpoint = <&typec1_dr_sw>;
		};
	};*/
};

&usbotg2 {
	dr_mode = "host";
	hnp-disable;
	srp-disable;
	adp-disable;
	/*usb-role-switch;*/
	disable-over-current;
	samsung,picophy-pre-emp-curr-control = <3>;
	samsung,picophy-dc-vol-level-adjust = <7>;
	status = "okay";
/*
	port {
		usb2_drd_sw: endpoint {
			remote-endpoint = <&typec2_dr_sw>;
		};
	};*/
};

&usdhc1 {
	pinctrl-names = "default", "state_100mhz", "state_200mhz";
	pinctrl-0 = <&pinctrl_usdhc1>;
	pinctrl-1 = <&pinctrl_usdhc1>;
	pinctrl-2 = <&pinctrl_usdhc1>;
	bus-width = <8>;
	mmc-ddr-1_8v;
	mmc-hs200-1_8v;
	mmc-hs400-1_8v;
	non-removable;
	status = "okay";
};

&usdhc2 {
	pinctrl-names = "default", "state_100mhz", "state_200mhz";
	pinctrl-0 = <&pinctrl_usdhc2>, <&pinctrl_usdhc2_gpio>;
	pinctrl-1 = <&pinctrl_usdhc2>, <&pinctrl_usdhc2_gpio>;
	pinctrl-2 = <&pinctrl_usdhc2>, <&pinctrl_usdhc2_gpio>;
	cd-gpios = <&gpio3 00 GPIO_ACTIVE_LOW>;
	vmmc-supply = <&reg_usdhc2_vmmc>;
	bus-width = <4>;
	status = "okay";
	no-sdio;
	no-mmc;
};

&flexio1_pwm {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_flexio1pwm>;
	status = "okay";
	pwmpin = /bits/ 8 <26>;
};

&flexio2_pwm {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_flexio2pwm>;
	status = "disabled";
	pwmpin = /bits/ 8 <28>;
};

&iomuxc {
/*added*/

    rotary_encoder_pins: rotary-encoder-pins {
        fsl,pins = <
            MX93_PAD_GPIO_IO18__GPIO2_IO18  0x31  /* OUTA (P11-12) */
            MX93_PAD_GPIO_IO22__GPIO2_IO22  0x31  /* OUTB (P11-15) */
              
        >;
    };

    rotary_sw_pins: rotary-sw-pins {
        fsl,pins = <
		MX93_PAD_GPIO_IO17__GPIO2_IO17  0x31  /* SW (P11-11) */ 
        >;
    };

/*added*/
	pinctrl_lcdif0: lcdif0grp {
		fsl,pins = <
			MX93_PAD_GPIO_IO00__MEDIAMIX_DISP_CLK		0x31e
			MX93_PAD_GPIO_IO01__MEDIAMIX_DISP_DE		0x31e
			MX93_PAD_GPIO_IO02__MEDIAMIX_DISP_VSYNC		0x31e
			MX93_PAD_GPIO_IO03__MEDIAMIX_DISP_HSYNC		0x31e
			MX93_PAD_GPIO_IO04__MEDIAMIX_DISP_DATA00		0x31e
			MX93_PAD_GPIO_IO05__MEDIAMIX_DISP_DATA01		0x31e
			MX93_PAD_GPIO_IO06__MEDIAMIX_DISP_DATA02		0x31e
			MX93_PAD_GPIO_IO07__MEDIAMIX_DISP_DATA03		0x31e
			MX93_PAD_GPIO_IO08__MEDIAMIX_DISP_DATA04		0x31e
			MX93_PAD_GPIO_IO09__MEDIAMIX_DISP_DATA05		0x31e
			MX93_PAD_GPIO_IO10__MEDIAMIX_DISP_DATA06		0x31e
			MX93_PAD_GPIO_IO11__MEDIAMIX_DISP_DATA07		0x31e
			MX93_PAD_GPIO_IO12__MEDIAMIX_DISP_DATA08		0x31e
			MX93_PAD_GPIO_IO13__MEDIAMIX_DISP_DATA09		0x31e
			MX93_PAD_GPIO_IO14__MEDIAMIX_DISP_DATA10		0x31e
			MX93_PAD_GPIO_IO15__MEDIAMIX_DISP_DATA11		0x31e
			MX93_PAD_GPIO_IO16__MEDIAMIX_DISP_DATA12		0x31e
			MX93_PAD_GPIO_IO17__MEDIAMIX_DISP_DATA13		0x31e
			MX93_PAD_GPIO_IO18__MEDIAMIX_DISP_DATA14		0x31e
			MX93_PAD_GPIO_IO19__MEDIAMIX_DISP_DATA15		0x31e
			MX93_PAD_GPIO_IO20__MEDIAMIX_DISP_DATA16		0x31e
			MX93_PAD_GPIO_IO21__MEDIAMIX_DISP_DATA17		0x31e
			MX93_PAD_GPIO_IO22__MEDIAMIX_DISP_DATA18		0x31e
			MX93_PAD_GPIO_IO23__MEDIAMIX_DISP_DATA19		0x31e
			MX93_PAD_GPIO_IO24__MEDIAMIX_DISP_DATA20		0x31e
			MX93_PAD_GPIO_IO25__MEDIAMIX_DISP_DATA21		0x31e
			MX93_PAD_GPIO_IO26__MEDIAMIX_DISP_DATA22		0X31e
			MX93_PAD_GPIO_IO27__MEDIAMIX_DISP_DATA23		0X31e
		>;
	};

	pinctrl_gpio: gpio0grp {
		fsl,pins = <
			MX93_PAD_GPIO_IO00__GPIO2_IO00		0x31e
			MX93_PAD_GPIO_IO01__GPIO2_IO01		0x31e
			MX93_PAD_GPIO_IO02__GPIO2_IO02		0x31e
			MX93_PAD_GPIO_IO03__GPIO2_IO03		0x31e
			MX93_PAD_GPIO_IO04__GPIO2_IO04		0x31e
			MX93_PAD_GPIO_IO05__GPIO2_IO05		0x31e
			MX93_PAD_GPIO_IO06__GPIO2_IO06		0x31e
			MX93_PAD_GPIO_IO07__GPIO2_IO07		0x31e
			MX93_PAD_GPIO_IO08__GPIO2_IO08		0x31e
			MX93_PAD_GPIO_IO09__GPIO2_IO09		0x31e
			MX93_PAD_GPIO_IO10__GPIO2_IO10		0x31e
			MX93_PAD_GPIO_IO11__GPIO2_IO11		0x31e
			MX93_PAD_GPIO_IO12__GPIO2_IO12		0x31e
			MX93_PAD_GPIO_IO13__GPIO2_IO13		0x31e
			MX93_PAD_GPIO_IO14__GPIO2_IO14		0x31e
			MX93_PAD_GPIO_IO15__GPIO2_IO15		0x31e
			MX93_PAD_GPIO_IO16__GPIO2_IO16		0x31e
			MX93_PAD_GPIO_IO17__GPIO2_IO17		0x31e
			MX93_PAD_GPIO_IO18__GPIO2_IO18		0x31e
			MX93_PAD_GPIO_IO19__GPIO2_IO19		0x31e
			MX93_PAD_GPIO_IO20__GPIO2_IO20		0x31e
			MX93_PAD_GPIO_IO21__GPIO2_IO21		0x31e
			MX93_PAD_GPIO_IO22__GPIO2_IO22		0x31e
			MX93_PAD_GPIO_IO23__GPIO2_IO23		0x31e
			MX93_PAD_GPIO_IO24__GPIO2_IO24		0x31e
			MX93_PAD_GPIO_IO25__GPIO2_IO25		0x31e
			MX93_PAD_GPIO_IO26__GPIO2_IO26		0X31e
			MX93_PAD_GPIO_IO27__GPIO2_IO27		0X31e
		>;
	};

	pinctrl_eth_reset: ethresetgrp {
		fsl,pins = <
			MX93_PAD_SD3_CLK__GPIO3_IO20		0x31e
		>;
	};

	pinctrl_flexcan1: flexcan1grp {
		fsl,pins = <
			MX93_PAD_PDM_CLK__CAN1_TX			0x139e
			MX93_PAD_PDM_BIT_STREAM0__CAN1_RX		0x139e
		>;
	};

	pinctrl_flexcan2: flexcan2grp {
		fsl,pins = <
			MX93_PAD_DAP_TDI__CAN2_TX			0x139e
			MX93_PAD_DAP_TDO_TRACESWO__CAN2_RX	0x139e
		>;
	};

	pinctrl_flexio1pwm: flexio1pwmgrp {
		fsl,pins = <
			MX93_PAD_CCM_CLKO1__FLEXIO1_FLEXIO26		0x39e
		>;
	};

	pinctrl_flexio2pwm: flexio2pwmgrp {
		fsl,pins = <
			MX93_PAD_CCM_CLKO3__FLEXIO2_FLEXIO28		0x39e
		>;
	};

	pinctrl_lpi2c1: lpi2c1grp {
		fsl,pins = <
			MX93_PAD_I2C1_SCL__LPI2C1_SCL			0x40000b9e
			MX93_PAD_I2C1_SDA__LPI2C1_SDA			0x40000b9e
		>;
	};

	pinctrl_lpi2c2: lpi2c2grp {
		fsl,pins = <
			MX93_PAD_I2C2_SCL__LPI2C2_SCL			0x40000b9e
			MX93_PAD_I2C2_SDA__LPI2C2_SDA			0x40000b9e
		>;
	};

	pinctrl_lpi2c3: lpi2c3grp {
		fsl,pins = <
			MX93_PAD_GPIO_IO28__LPI2C3_SDA			0x40000b9e
			MX93_PAD_GPIO_IO29__LPI2C3_SCL			0x40000b9e
		>;
	};

	pinctrl_pcal6524: pcal6524grp {
		fsl,pins = <
			MX93_PAD_CCM_CLKO2__GPIO3_IO27			0x31e
		>;
	};

	pinctrl_eqos: eqosgrp {
		fsl,pins = <
			MX93_PAD_ENET1_MDC__ENET_QOS_MDC			0x57e
			MX93_PAD_ENET1_MDIO__ENET_QOS_MDIO			0x57e
			MX93_PAD_ENET1_RD0__ENET_QOS_RGMII_RD0			0x57e
			MX93_PAD_ENET1_RD1__ENET_QOS_RGMII_RD1			0x57e
			MX93_PAD_ENET1_RD2__ENET_QOS_RGMII_RD2			0x57e
			MX93_PAD_ENET1_RD3__ENET_QOS_RGMII_RD3			0x57e
			MX93_PAD_ENET1_RXC__CCM_ENET_QOS_CLOCK_GENERATE_RX_CLK	0x5fe
			MX93_PAD_ENET1_RX_CTL__ENET_QOS_RGMII_RX_CTL		0x57e
			MX93_PAD_ENET1_TD0__ENET_QOS_RGMII_TD0			0x57e
			MX93_PAD_ENET1_TD1__ENET_QOS_RGMII_TD1			0x57e
			MX93_PAD_ENET1_TD2__ENET_QOS_RGMII_TD2			0x57e
			MX93_PAD_ENET1_TD3__ENET_QOS_RGMII_TD3			0x57e
			MX93_PAD_ENET1_TXC__CCM_ENET_QOS_CLOCK_GENERATE_TX_CLK	0x5fe
			MX93_PAD_ENET1_TX_CTL__ENET_QOS_RGMII_TX_CTL		0x57e
		>;
	};

	pinctrl_fec: fecgrp {
		fsl,pins = <
			MX93_PAD_ENET2_MDC__ENET1_MDC			0x57e
			MX93_PAD_ENET2_MDIO__ENET1_MDIO			0x57e
			MX93_PAD_ENET2_RD0__ENET1_RGMII_RD0		0x57e
			MX93_PAD_ENET2_RD1__ENET1_RGMII_RD1		0x57e
			MX93_PAD_ENET2_RD2__ENET1_RGMII_RD2		0x57e
			MX93_PAD_ENET2_RD3__ENET1_RGMII_RD3		0x57e
			MX93_PAD_ENET2_RXC__ENET1_RGMII_RXC		0x5fe
			MX93_PAD_ENET2_RX_CTL__ENET1_RGMII_RX_CTL	0x57e
			MX93_PAD_ENET2_TD0__ENET1_RGMII_TD0		0x57e
			MX93_PAD_ENET2_TD1__ENET1_RGMII_TD1		0x57e
			MX93_PAD_ENET2_TD2__ENET1_RGMII_TD2		0x57e
			MX93_PAD_ENET2_TD3__ENET1_RGMII_TD3		0x57e
			MX93_PAD_ENET2_TXC__ENET1_RGMII_TXC		0x5fe
			MX93_PAD_ENET2_TX_CTL__ENET1_RGMII_TX_CTL	0x57e
		>;
	};

	pinctrl_uart1: uart1grp {
		fsl,pins = <
			MX93_PAD_UART1_RXD__LPUART1_RX			0x31e
			MX93_PAD_UART1_TXD__LPUART1_TX			0x31e
		>;
	};

	pinctrl_uart5: uart5grp {
		fsl,pins = <
			MX93_PAD_DAP_TDO_TRACESWO__LPUART5_TX	0x31e
			MX93_PAD_DAP_TDI__LPUART5_RX		0x31e
			MX93_PAD_DAP_TMS_SWDIO__LPUART5_RTS_B	0x31e
			MX93_PAD_DAP_TCLK_SWCLK__LPUART5_CTS_B	0x31e
		>;
	};

	pinctrl_usdhc1: usdhc1grp {
		fsl,pins = <
			MX93_PAD_SD1_CLK__USDHC1_CLK		0x15fe
			MX93_PAD_SD1_CMD__USDHC1_CMD		0x13fe
			MX93_PAD_SD1_DATA0__USDHC1_DATA0	0x13fe
			MX93_PAD_SD1_DATA1__USDHC1_DATA1	0x13fe
			MX93_PAD_SD1_DATA2__USDHC1_DATA2	0x13fe
			MX93_PAD_SD1_DATA3__USDHC1_DATA3	0x13fe
			MX93_PAD_SD1_DATA4__USDHC1_DATA4	0x13fe
			MX93_PAD_SD1_DATA5__USDHC1_DATA5	0x13fe
			MX93_PAD_SD1_DATA6__USDHC1_DATA6	0x13fe
			MX93_PAD_SD1_DATA7__USDHC1_DATA7	0x13fe
			MX93_PAD_SD1_STROBE__USDHC1_STROBE	0x15fe
		>;
	};

	pinctrl_reg_usdhc2_vmmc: regusdhc2vmmcgrp {
		fsl,pins = <
			MX93_PAD_SD2_RESET_B__GPIO3_IO07	0x31e
		>;
	};

	pinctrl_usdhc2_gpio: usdhc2gpiogrp {
		fsl,pins = <
			MX93_PAD_SD2_CD_B__GPIO3_IO00		0x31e
		>;
	};

	pinctrl_usdhc2: usdhc2grp {
		fsl,pins = <
			MX93_PAD_SD2_CLK__USDHC2_CLK		0x17fe
			MX93_PAD_SD2_CMD__USDHC2_CMD		0x13fe
			MX93_PAD_SD2_DATA0__USDHC2_DATA0	0x13fe
			MX93_PAD_SD2_DATA1__USDHC2_DATA1	0x13fe
			MX93_PAD_SD2_DATA2__USDHC2_DATA2	0x13fe
			MX93_PAD_SD2_DATA3__USDHC2_DATA3	0x13fe
			MX93_PAD_SD2_VSELECT__USDHC2_VSELECT	0x51e
		>;
	};

	pinctrl_usdhc3: usdhc3grp {
		fsl,pins = <
			MX93_PAD_SD3_CLK__USDHC3_CLK		0x15fe
			MX93_PAD_SD3_CMD__USDHC3_CMD		0x13fe
			MX93_PAD_SD3_DATA0__USDHC3_DATA0	0x13fe
			MX93_PAD_SD3_DATA1__USDHC3_DATA1	0x13fe
			MX93_PAD_SD3_DATA2__USDHC3_DATA2	0x13fe
			MX93_PAD_SD3_DATA3__USDHC3_DATA3	0x13fe
		>;
	};

	pinctrl_usdhc3_wlan: usdhc3wlangrp {
		fsl,pins = <
			MX93_PAD_CCM_CLKO1__GPIO3_IO26		0x31e
		>;
	};

	pinctrl_sai1: sai1grp {
		fsl,pins = <
			MX93_PAD_SAI1_TXC__SAI1_TX_BCLK			0x31e
			MX93_PAD_SAI1_TXFS__SAI1_TX_SYNC		0x31e
			MX93_PAD_SAI1_TXD0__SAI1_TX_DATA00		0x31e
			MX93_PAD_SAI1_RXD0__SAI1_RX_DATA00		0x31e
		>;
	};

	pinctrl_gpio_led: gpioledgrp {
		fsl,pins = <
			MX93_PAD_CCM_CLKO4__GPIO4_IO29		0x31e
			/*MX93_PAD_CCM_CLKO1__GPIO3_IO26		0x31e*/
			MX93_PAD_CCM_CLKO3__GPIO4_IO28		0x31e
		>;
	};

	pinctrl_gpio_key: gpiokeygrp {
		fsl,pins = <
			MX93_PAD_CCM_CLKO2__GPIO3_IO27		0x31e
		>;
	};

	pinctrl_sai3: sai3grp {
		fsl,pins = <
			MX93_PAD_GPIO_IO26__SAI3_TX_SYNC		0x31e
			MX93_PAD_GPIO_IO16__SAI3_TX_BCLK		0x31e
			MX93_PAD_GPIO_IO17__SAI3_MCLK		0x31e
			MX93_PAD_GPIO_IO19__SAI3_TX_DATA00		0x31e
			MX93_PAD_GPIO_IO20__SAI3_RX_DATA00		0x31e
		>;
	};

	pinctrl_pdm: pdmgrp {
		fsl,pins = <
			MX93_PAD_PDM_CLK__PDM_CLK			0x31e
			MX93_PAD_PDM_BIT_STREAM0__PDM_BIT_STREAM00	0x31e
			MX93_PAD_PDM_BIT_STREAM1__PDM_BIT_STREAM01	0x31e
		>;
	};

	pinctrl_spdif: spdifgrp {
		fsl,pins = <
			MX93_PAD_GPIO_IO22__SPDIF_IN		0x31e
			MX93_PAD_GPIO_IO23__SPDIF_OUT		0x31e
		>;
	};
	pinctrl_csi0_gpio: csigpiogpr {
		fsl,pins = <
			MX93_PAD_SD3_DATA3__GPIO3_IO25		0x31e //rst
			MX93_PAD_SD3_DATA2__GPIO3_IO24		0x31e //pwdn
		>;
	};
	pinctrl_wifi_en: wifi_engrp {
		fsl,pins = <
			MX93_PAD_PDM_BIT_STREAM1__GPIO1_IO10	0x31e
		>;
	};
};

&epxp {
	status = "okay";
};

&cameradev {
	status = "okay";
};

&isi_0 {
	status = "okay";

	cap_device {
		status = "okay";
	};
};
&mipi_csi {
	#address-cells = <1>;
	#size-cells = <0>;
	status = "okay";

	port@0 {
		reg = <0>;
		mipi_csi_ep: endpoint {
			remote-endpoint = <&ov5645_mipi_1_ep>;
			data-lanes = <2>;
			cfg-clk-range = <28>;
			hs-clk-range = <0x2b>;
			bus-type = <4>;
		};
	};
};

